<!DOCTYPE html>
<html>
<body>

    <h1>Asynchronous JavaScript</h1>

    <p>The syntax of callback functions is as follows:</p>
    
    <p id="demo"></p>

    <script>
        function myDisplayer(some) {
        document.getElementById("demo").innerHTML = some;
        }

        function myCalculator(num1, num2, myCallback) {
        let sum = num1 + num2;
        myCallback(sum);
        }

        myCalculator(5, 5, myDisplayer);
    </script>

    <p>In the example above, myDisplayer is the name of a function and it is passes to myCalculator() as an argument.</p>

    <p style="background-color: yellow; width: 500px;">In the real world, callbacks are most often used with asynchronous functions.<br>
    A typical example is JavaScript setTimeout().</p>

    <h2>Waiting for a Timeout</h2>

    <p>When using the JavaScript function setTimeout(), you can specify a callback function to be executed on time-out:</p>

    <p>Wait 3 seconds (3000 milliseconds) for this page to change.</p>

    <h1 id="demo2"></h1>

    <script>
        setTimeout(myFunction2, 3000);

        function myFunction2() {
        document.getElementById("demo2").innerHTML = "I love You !!";
        }
    </script>

    <p>In the example above, myFunction is used as a callback.</p>
    <p>The function (the function name) is passed to setTimeout() as an argument.</p>
    <p>3000 is the number of milliseconds before time-out, so myFunction() will be called after 3 seconds.</p>

    <p style="background-color: yellow; width: 500px;">When you pass a function as an argument, remember not to use parenthesis.</p>

    <p>Instead of passing the name of a function as an argument to another function, you can always pass a whole function instead:</p>

    <h1 id="demo3"></h1>

    <script>
        setTimeout(function() { myFunction3("I love You !!!"); }, 3000);

        function myFunction3(value) {
        document.getElementById("demo3").innerHTML = value;
        }
    </script>

    <p>In the example above, function(){ myFunction("I love You !!!"); } is used as a callback. It is a complete function. The complete function is passed to setTimeout() as an argument.</p>
    <p>3000 is the number of milliseconds before time-out, so myFunction() will be called after 3 seconds.</p>

    <h2>Waiting for Intervals:</h2>

    <p>When using the JavaScript function setInterval(), you can specify a callback function to be executed for each interval:</p>

    <p>Using setInterval() to display the time every second (1000 milliseconds).</p>

    <h1 id="demo4"></h1>

    <script>
        setInterval(myFunction4, 1000);

        function myFunction4() {
            let d = new Date();
            document.getElementById("demo4").innerHTML=
            d.getHours() + ":" +
            d.getMinutes() + ":" +
            d.getSeconds();
        }
    </script>

    <p>In the example above, myFunction is used as a callback.</p>
    <p>The function (the function name) is passed to setInterval() as an argument.</p>
    <p>1000 is the number of milliseconds between intervals, so myFunction() will be called every second.</p>

    <h2>Waiting for Files</h2>

    <p>If you create a function to load an external resource (like a script or a file), you cannot use the content before it is fully loaded.</p>
    <p>This is the perfect time to use a callback.</p>
    <p>This example loads a HTML file (mycar.html), and displays the HTML file in a web page, after the file is fully loaded:</p>

    <p id="demo5"></p>

    <script>
        function myDisplayer5(some) {
        document.getElementById("demo5").innerHTML = some;
        }

        function getFile5(myCallback) {
        let req = new XMLHttpRequest();
        req.open('GET', "mycar.html");
        req.onload = function() {
            if (req.status == 200) {
            myCallback(this.responseText);
            } else {
            myCallback("Error: " + req.status);
            }
        }
        req.send();
        }

        getFile5(myDisplayer5); 
    </script>

    <p>In the example above, myDisplayer is used as a callback.</p>
    <p>The function (the function name) is passed to getFile() as an argument.</p>
    <p>Below is a copy of mycar.html:</p>

    <textarea style="font-family: courier; width: 500px; height: 100px">
        <img src="img_car.jpg" alt="Nice car" style="width:100%">

        <p>A car is a wheeled, self-powered motor vehicle used for transportation.
        Most definitions of the term specify that cars are designed to run primarily on roads, to have seating for one to eight people, to typically have four wheels.</p>
        
        <p>(Wikipedia)</p>
    </textarea>

</body>
</html>


